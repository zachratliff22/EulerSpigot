

## Euler's Constant Spigot Algorithm
______

This project was inspired by the Google Billboard puzzle, which appeared in places such as Cambridge, Massachusetts, Seattle, Washington, and 
near Silicon Valley in California.

![Google Billboard Puzzle](/images/billboard.PNG?raw=true "Google Billboard Puzzle")

Google has been very fond of this transcendental number, even using it in their IPO filing when they pledged to raise $2,718,281,828 (*e* billion dollars) [1]. At first glance the problem doesn't appear to be that difficult (and it probably isn't for some), however, there are two fairly difficult subproblems at the root of the solution:

1. How do we generate the digits of Euler's constant
2. How do we check if the number is prime

Right now, this project only focuses on answering the first question. Check out Miller-Rabin's primality test for checking whether numbers are prime. For 10 digit numbers (as in the Google Billboard puzzle), you need a more efficient algorithm like Miller-Rabin, rather than just looping through all [2 ... (k / 2)] integers. 

Before jumping into how you can generate the digits of Euler's constant, I discuss two possible (hackish) solutions. 

- Just Google it! 
- Look at the distribution of primes to see how many digits you actually need. The probability that the first *k* digits doesn't contain a 10 digit prime approaches zero quickly (you really only need the first 200 digits or so for *p* < 0.0001)

The above solutions should be fairly straight forward. In fact, if you only need the first 200 digits of *e* based on your probability calculations, then there are several websites available to retreive these.


#### Turn on the spigot

Now we discuss our approach, utilizing the pattern found in *e* when representing the number in mixed radix form. Since *e* is a transcendental number, there isn't any pattern available for generating digits when viewing the number as a base 10 decimal. However, if we view the constant in [mixed radix](https://en.wikipedia.org/wiki/Mixed_radix) form i.e. 1 + (1/1)(1 + (1/2)(1 + (1/3)(1 + (1/4)(1 + ... )))), then there is a nice pattern and we can extract digits one by one. Look at this awesome [paper](https://academic.oup.com/comjnl/article-pdf/11/2/229/1076231/11-2-229.pdf) by A.H.J. Sale for more details. 

#### Running the Go Program

`go run EulerSpigot.go 5000` will generate the first 5,000 digits of *e*

#### Running the Haskell program

To compile into a binary, run `ghc --make EulerSpigot.hs`. Then simply run the program like: `./EulerSpigot 100` to generate the first 100 digits of *e*

#### Performance of Euler Spigot program written in Go

This was by far the most efficient implementation. I was able to generate 50,000 digits in a matter of minutes, and 3 million digits in a couple of days.

#### Performance of Euler Spigot program written in Haskell

The below metrics were collected on a laptop with an Intel(R) Core(TM) i7-8650U CPU @ 2.11 GHz and 32 GB of RAM. 

![Performance of Euler Spigot](/images/haskellPerformance.PNG?raw=true "Euler Spigot Performance (Haskell)")

As you can see, generating the first 1,000 digits only takes a few seconds. However, the time it takes to collect more and more digits scales exponentially with *k* (the number of digits to generate). So generating the first 5,000 digits took 17 minutes! This is really slow, and I can probably improve quite a bit on it within the Haskell implementation.

#### The first 2,000,000 digits of *e*

It is worth mentioning that the folks at NASA have a [website]( https://apod.nasa.gov/htmltest/gifcity/e.2mil) where the 
first 2 million digits of Euler's constant have been generated [3]. It appears the digits have only been verified one or two times, but at least the first 5,000 appear correct based on my checking. 

#### The first 500,000,000,000 digits of *e*

[This guy](http://www.numberworld.org/misc_runs/e-500b.html) appears to have generated the first 500,000,000,000 (yes, that's 500 BILLION) digits of *e* [4]! And it only took 12 days! 


#### References
[1] Google's IPO filing for *e* billion dollars. https://www.ivedix.com/googles-tribute-to-euler-sparks-inspiration-in-business-intelligence/

[2] Sale, A. H. J. "The calculation of e to many significant digits." 
The Computer Journal 11.2 (1968): 229-230.

[3] Euler's Constant to 2 Million Digits. https://apod.nasa.gov/htmltest/gifcity/e.2mil

[4] Generating 500 Billion Digits of *e*. http://www.numberworld.org/misc_runs/e-500b.html

#### Euler's Constant to 5,000 Digits
_________________
Below is Euler's constant with with 5,000 decimal digits, computed using 
the EulerSpigot tool. 
```
e = 2.
7182818284590452353602874713526624977572470936999595749669676277240766303535475945713821785251664274
2746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901
1573834187930702154089149934884167509244761460668082264800168477411853742345442437107539077744992069
5517027618386062613313845830007520449338265602976067371132007093287091274437470472306969772093101416
9283681902551510865746377211125238978442505695369677078544996996794686445490598793163688923009879312
7736178215424999229576351482208269895193668033182528869398496465105820939239829488793320362509443117
3012381970684161403970198376793206832823764648042953118023287825098194558153017567173613320698112509
9618188159304169035159888851934580727386673858942287922849989208680582574927961048419844436346324496
8487560233624827041978623209002160990235304369941849146314093431738143640546253152096183690888707016
7683964243781405927145635490613031072085103837505101157477041718986106873969655212671546889570350354
0212340784981933432106817012100562788023519303322474501585390473041995777709350366041699732972508868
7696640355570716226844716256079882651787134195124665201030592123667719432527867539855894489697096409
7545918569563802363701621120477427228364896134225164450781824423529486363721417402388934412479635743
7026375529444833799801612549227850925778256209262264832627793338656648162772516401910590049164499828
9315056604725802778631864155195653244258698294695930801915298721172556347546396447910145904090586298
4967912874068705048958586717479854667757573205681288459205413340539220001137863009455606881667400169
8420558040336379537645203040243225661352783695117788386387443966253224985065499588623428189970773327
6171783928034946501434558897071942586398772754710962953741521115136835062752602326484728703920764310
0595841166120545297030236472549296669381151373227536450988890313602057248176585118063036442812314965
5070475102544650117272115551948668508003685322818315219600373562527944951582841882947876108526398139
5599006737648292244375287184624578036192981971399147564488262603903381441823262515097482798777996437
3089970388867782271383605772978824125611907176639465070633045279546618550966661856647097113444740160
7046262156807174818778443714369882185596709591025968620023537185887485696522000503117343920732113908
0329363447972735595527734907178379342163701205005451326383544000186323991490705479778056697853358048
9669062951194324730995876552368128590413832411607226029983305353708761389396391779574540161372236187
8936526053815584158718692553860616477983402543512843961294603529133259427949043372990857315802909586
3138268329147711639633709240031689458636060645845925126994655724839186564209752685082307544254599376
9170419777800853627309417101634349076964237222943523661255725088147792231519747780605696725380171807
7636034624592787784658506560507808442115296975218908740196609066518035165017925046195013665854366327
1254963990854914420001457476081930221206602433009641270489439039717719518069908699860663658323227870
9376502260149291011517177635944602023249300280401867723910288097866605651183260043688508817157238669
8422422010249505518816948032210025154264946398128736776589276881635983124778865201411741109136011649
9507662907794364600585194199856016264790761532103872755712699251827568798930276176114616254935649590
3798045838182323368612016243736569846703785853305275833337939907521660692380533698879565137285593883
4998947074161815501253970646481719467083481972144888987906765037959036696724949925452790337296361626
5897603949857674139735944102374432970935547798262961459144293645142861715858733974679189757121195618
7385783644758448423555581050025611492391518893099463428413936080383091662818811503715284967059741625
6282360921680751501777253874025642534708790891372917228286115159156837252416307722544063378759310598
2676094420326192428531701878177296023541306067213604600038966109364709514141718577701418060644363681
5464440053316087783143174440811949422975599314011888683314832802706553833004693290115744147563139997
2217038046170928945790962716622607407187499753592127560844147378233032703301682371936480021732857349
3594756433412994302485023573221459784328264142168487872167336701061509424345698440187331281010794512
7223737886126058165668053714396127888732527373890392890506865324138062796025930387727697783792868409
3253658807339884572187460210053114833513238500478271693762180049047955979592905916554705057775143081
7511269898518840871856402603530558373783242292418562564425502267215598027401261797192804713960068916
3828665277009752767069777036439260224372841840883251848770472638440379530166905465937461619323840363
8931313643271376888410268112198912752230562567562547017250863497653672886059667527408686274079128565
7699631378975303466061666980421826772456053066077389962421834085988207186468262321508028828635974683
9654358856685503773131296587975810501214916207656769950659715344763470320853215603674828608378656803
0730626576334697742956346437167093971930608769634953288468336130388294310408002968738691170666661468 
```

